---
layout: post
title: 2018-09-21(Today I Did)
date: 2018-08-08 16:52:00
tags: TID
author: shimsoon
---

# 2018-09-21 (Today I Did)
오늘은 얼굴없는가수를 좀 더 사용자 편의성을 위하여 몇가지 기능과, 버그를 수정하였다.

1. 내가 업로드한 노래 모아서 보여주기
2. 팔로우 기능 안되는 문제 해결
3. 팔로우 취소 기능
4. 홈화면에서 리사이클러뷰에 아이템이 존재하지 않을 때 존재하지 않는다는 메시지 보여주기
5. 회원가입 버튼 클릭시 프로그레스 바 보여주고 진행중에 회원가입버튼 중복클릭 방지하기

업로드한 노래 모아서 보여주기는 새롭게 RecyclerView를 보여줄 Activity를 생성하고 RecyclerView에서 사용할 Adapter도 따로 만들려고 했는데, 이미 ListenFragment에서 사용하는 SongAdapter가 있다는 것을 알았다. 다른 점은 원래의 어댑터는 모든 노래를 불러와 보여주지만, 새롭게 만들 어댑터는 내가 업로드한 노래만 불러와 보여줘야했다.
생각을 해보니 새롭게 어댑터와, recyclerView에 쓰일 item 레이아웃을 만드는 것보다는 원래 있던 SongAdapter의 생성자를 오버로딩하여서 내가 업로드한 노래목록만 보여주는 Activity에서 재사용하여 사용할 수 있었다.

홈화면에서 리사이클러뷰에 아이템이 존재하지 않을 때 존재하지 않는다는 메시지 보여주기는 어댑터의 생성자에서 데이터를 불러와 어댑터가 가지고 있는 리스트에 저장하기 때문에 리사이클러뷰를 가지고 있는 홈 프래그먼트에서 new 키워드로 어댑터를 생성한 후 어댑터의 getItemCount() 함수가 0 이상을 리턴하면 메시지를 숨기고 그렇지 않으면 보여주려고 했으나 생성자 안에서
파이어베이스 데이터베이스를 통한 데이터 인출이 비동기(?)적으로 이루어지기때문에 생성자가 끝났을 때 데이터 인출이 완료되었다는 보장이 없었다.
그래서 어댑터에서 처리하기로 하였고 어댑터의 생성자의 파라미터로 홈프래그먼트를 받아왔고, 받아온 홈프래그먼트로 어댑터 내에서 홈프래그먼트의 메소드를 호출할 수 있었다.
User객체는 만약 누군가를 팔로우 하고있다는 MyFollowing이라는 Map을 가지고있는데 데이터베이스에서 User객체를 받아왔을 때 MyFollowing이 존재하지 않는다면 팔로우 하는 사람이 없다는 메시지가 보이게 해서 해결할 수 있었다.